<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>FXDeployment: Getting started</title>
    <link rel='shortcut icon' href='./images/favicon.ico'>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="wrapper">
    <header>
        <h1><a href="index.html" title="Go to overview">FXDeployment: FXWebApp methods</a></h1>

        <h3><em>
            Embed a JavaFX scene into a browser page and automatically support user interaction via JavaScript callbacks
            in the host environment
        </em></h3>

        <p class="view"><a href="https://github.com/FXDeployment/FXDeployment">View the Project on GitHub
            <small>FXDeployment/FXDeployment</small>
        </a></p>


        <h3>Source Code</h3>
        <ul>
            <li>
                <a href="https://github.com/FXDeployment/FXDeployment/zipball/master">Download <strong>ZIP File</strong></a>
            </li>
            <li>
                <a href="https://github.com/FXDeployment/FXDeployment/tarball/master">Download <strong>TAR Ball</strong></a>
            </li>
            <li>
                <a href="https://github.com/FXDeployment/FXDeployment">View On <strong>GitHub</strong></a>
            </li>
        </ul>
        <hr>
        <h3>Resources</h3>

        <p>
        <ul>
            <li>
                <a href="./GettingStarted.html"> <strong>Getting Started</strong></a>
            </li>
            <li>
                <a href="./AttachingCallbacks.html"> <strong>Attaching Callbacks</strong></a>
            </li>
            <li>
                <a href="./FXWebApp.html"> <strong>FXWebApp methods</strong></a>
            </li>
        </ul>
        <ul>
            <li>
                <a href="./GUIDesignTools.html"> <strong>GUI Design Tools</strong></a>
            </li>
            <li>
                <a href="./AttachingCallbacks.html"> <strong>Creating FXML</strong></a>
            </li>
            <li>
                <a href="./javadoc/index.html"> <strong>Java Documents</strong></a>
            </li>
        </ul>
        <hr>

    </header>

    <section>
        <p>
            Javascript programmers have full access to the JavaFX GUI objects and their methods
            via the embedded application which provides several Java-coded methods
            to simplify the process.<br>
            Once the GUI is embedded in the hosting HTML document, the application can
            be accessed in Javascript through the <strong>data-appname</strong> that was defined
            as an attribute of the <strong>fxml-placeholder</strong> or <strong>fxml-content</strong>
            definition in the HTML document (see <a href="./GettingStarted.html">Getting Started</a>):
        </p>

        <p>
            <strong>
                var app = document.getElementById(appname);<br>
            </strong>
        </p>

        <h3>
            <a aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Lookup functions
        </h3>
        The application's lookup methods provide functionality similar to the Javascript
        document.getElementById and document.getElementsByClassname functions.<br>

        Lookup methods always search for elements relative to the <strong>"root"</strong> node
        (i.e to the top level node) defined in the FXML. This is initially added to a JavaFX hierarchy
        as below:<br>
        JavaFX Stage ----&gt JavaFX Scene ----&gt Root Node<br>.
        Users can modify the Stage or Scene and move the root programmatically, but as searches are always done
        relative to the root, the lookup methods will always return correct information.

        <ul>
            <li>
                <strong>Searching upwards in the hierarchy</strong>
                <ul>
                    <li><strong>getStage</strong> - returns the Stage the root is presently within</li>
                    <li><strong>getScene</strong> - returns the Scene the root is presently within</li>
                    <li><strong>getRoot</strong> - returns the root</li>
                </ul>
            </li>
            <li>
                <strong>Searching at or below the root in the hierarchy</strong><br>
                In JavaFX, getElementById and getElementsByClassname function are replaced with lookup
                methods that search by both id or classname. Preface the search selector string with:
                <ul>
                    <li><strong>#</strong> to locate by id</li>
                    <li><strong>.</strong> to locate by class</li>
                </ul>
                The available methods from the application are:
                <ul>
                    <li>
                        <strong>lookup(string selector)</strong><br>
                        Returns the single node that first matches the supplied CSS string selector.
                    <li>
                        <strong>lookupAll(string selector)</strong><br>
                        Returns a collection of nodes that matche the supplied CSS string selector.
                    </li>
                </ul>
                These are simply convenience methods for getRoot().lookup(...) and getRoot().lookupAll(...).
                To search from the scene, use getScene().lookup(...).
            </li>
        </ul>


        <h3>
            <a aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Thread safety
        </h3>
        JavaFX scenes should almost always be created, accessed and modified from the JavaFX Platform thread.
        Javascript callbacks invoked from the <strong><em>FXWebApp</em></strong> controller will always be
        run on the Platform thread.
        Users may also need to invoke Java methods on the Platform thread outside of the callbacks and several
        helper methods are provided by the <strong><em>FXWebApp</em></strong> application for this:
        <ul>
            <li><strong>isFxPlatformThread()</strong> - returns true if called from the Platform thread,
                false otherwise
            </li>
            <li><em>Non-blocking methods that are queued immediately and run asynchronously</em></li>
            <ul>
                <li><strong>runFX(JSObject function)</strong></li>
                <li><strong>runFX(JSObject function, JSObject data)</strong></li>
            </ul>
            Here, function is a user-supplied Javascript object that will be run on the Platform thread.
            If supplied, data will be passed as an argument to the function.
            Neither of these methods return a result.
            <li><em>Blocking methods that are queued immediately</em></li>
            <ul>
                <li><strong>var result = runAndWaitFX(JSObject function)</strong></li>
                <li><strong>var result = runAndWaitFX(JSObject function, JSObject data)</strong></li>
            </ul>
            Here, as before, function is a user-supplied Javascript object that will be run on the Platform thread.
            If supplied, data will be passed as an argument to the function.
            These methods return the result from the function call.
            <li><em>Methods that are queued immediately and run asynchronously, but expose a blocking
            result getting method to Javascript</em></li>
            <ul>
                <li><strong>var futureTask = runAndGoFX(JSObject function)</strong></li>
                <li><strong>var futureTask = runAndGoFX(JSObject function, JSObject data)</strong></li>
            </ul>
            Here, as before, function is a user-supplied Javascript object that will be run on the Platform thread.
            If supplied, data will be passed as an argument to the function.
            These methods create a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html">
            java.util.concurrent.FutureTask</a> object which is:
            <ol>
                <li>Passed as a further input to the supplied Javascript function</li>
                <li>Returned as the output from runAndGoFX </li>
            </ol>
            The result of the user supplied function can be recovered by calling its get method:<br>
            var result = futureTask.get();<br>
            The get method will return immediately if the user-supplied function has completed running. Otherwise it
            will block and return the result once the function has executed. Users can poll the object to check for
            completion using the non-blocking isDone method:<br>
            var done = futureTask.isDone();
        </ul>


    </section>

    <footer>
        <p>The project is maintained by
            <img src="./images/AppReflector_128.png" href="http://appreflector.com">
            <br>AppReflector Ltd
        </p>

        <p>
            <small>
                Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a>
            </small>
        </p>
    </footer>
</div>
<script src="javascripts/scale.fix.js"></script>

</body>
</html>
